{"source":1,"revision":43,"description":null,"createdBy":{"displayName":"Rapaka, Vivekanand","url":"https://spsprodsin1.vssps.visualstudio.com/Ad5d055b6-6fee-47a0-96b1-e83ee14e3fc9/_apis/Identities/d1fb5890-4f0a-6627-b09a-08745c19f5f6","_links":{"avatar":{"href":"https://dev.azure.com/vivekanandrapaka/_apis/GraphProfile/MemberAvatars/aad.ZDFmYjU4OTAtNGYwYS03NjI3LWIwOWEtMDg3NDVjMTlmNWY2"}},"id":"d1fb5890-4f0a-6627-b09a-08745c19f5f6","uniqueName":"vivekanand.rapaka@capgemini.com","imageUrl":"https://dev.azure.com/vivekanandrapaka/_apis/GraphProfile/MemberAvatars/aad.ZDFmYjU4OTAtNGYwYS03NjI3LWIwOWEtMDg3NDVjMTlmNWY2","descriptor":"aad.ZDFmYjU4OTAtNGYwYS03NjI3LWIwOWEtMDg3NDVjMTlmNWY2"},"createdOn":"2020-10-15T10:31:27.720Z","modifiedBy":{"displayName":"Rapaka, Vivekanand","url":"https://spsprodsin1.vssps.visualstudio.com/Ad5d055b6-6fee-47a0-96b1-e83ee14e3fc9/_apis/Identities/d1fb5890-4f0a-6627-b09a-08745c19f5f6","_links":{"avatar":{"href":"https://dev.azure.com/vivekanandrapaka/_apis/GraphProfile/MemberAvatars/aad.ZDFmYjU4OTAtNGYwYS03NjI3LWIwOWEtMDg3NDVjMTlmNWY2"}},"id":"d1fb5890-4f0a-6627-b09a-08745c19f5f6","uniqueName":"vivekanand.rapaka@capgemini.com","imageUrl":"https://dev.azure.com/vivekanandrapaka/_apis/GraphProfile/MemberAvatars/aad.ZDFmYjU4OTAtNGYwYS03NjI3LWIwOWEtMDg3NDVjMTlmNWY2","descriptor":"aad.ZDFmYjU4OTAtNGYwYS03NjI3LWIwOWEtMDg3NDVjMTlmNWY2"},"modifiedOn":"2020-10-20T05:14:16.320Z","isDeleted":false,"lastRelease":{"id":45,"name":"Release-45","artifacts":[],"_links":{},"description":"","releaseDefinition":{"id":1,"projectReference":null,"_links":{}},"createdOn":"2020-10-19T18:38:27.880Z","createdBy":{"displayName":"Rapaka, Vivekanand","url":"https://spsprodsin1.vssps.visualstudio.com/Ad5d055b6-6fee-47a0-96b1-e83ee14e3fc9/_apis/Identities/d1fb5890-4f0a-6627-b09a-08745c19f5f6","_links":{"avatar":{"href":"https://dev.azure.com/vivekanandrapaka/_apis/GraphProfile/MemberAvatars/aad.ZDFmYjU4OTAtNGYwYS03NjI3LWIwOWEtMDg3NDVjMTlmNWY2"}},"id":"d1fb5890-4f0a-6627-b09a-08745c19f5f6","uniqueName":"vivekanand.rapaka@capgemini.com","imageUrl":"https://dev.azure.com/vivekanandrapaka/_apis/GraphProfile/MemberAvatars/aad.ZDFmYjU4OTAtNGYwYS03NjI3LWIwOWEtMDg3NDVjMTlmNWY2","descriptor":"aad.ZDFmYjU4OTAtNGYwYS03NjI3LWIwOWEtMDg3NDVjMTlmNWY2"}},"variables":{"AIlocation":{"value":"\"EastUS\""},"region":{"value":"\"EastUS\""},"spSKU":{"value":"\"S1\""},"spTier":{"value":"\"Standard\""},"storesourcegroup":{"value":"az-terf-prd-rg"}},"variableGroups":[],"environments":[{"id":1,"name":"Dev","rank":1,"owner":{"displayName":"Rapaka, Vivekanand","url":"https://spsprodsin1.vssps.visualstudio.com/Ad5d055b6-6fee-47a0-96b1-e83ee14e3fc9/_apis/Identities/d1fb5890-4f0a-6627-b09a-08745c19f5f6","_links":{"avatar":{"href":"https://dev.azure.com/vivekanandrapaka/_apis/GraphProfile/MemberAvatars/aad.ZDFmYjU4OTAtNGYwYS03NjI3LWIwOWEtMDg3NDVjMTlmNWY2"}},"id":"d1fb5890-4f0a-6627-b09a-08745c19f5f6","uniqueName":"vivekanand.rapaka@capgemini.com","imageUrl":"https://dev.azure.com/vivekanandrapaka/_apis/GraphProfile/MemberAvatars/aad.ZDFmYjU4OTAtNGYwYS03NjI3LWIwOWEtMDg3NDVjMTlmNWY2","descriptor":"aad.ZDFmYjU4OTAtNGYwYS03NjI3LWIwOWEtMDg3NDVjMTlmNWY2"},"variables":{"appInsightsname":{"value":"\"appi-dev-appInsights\""},"ResouceGroupName":{"value":"\"az-terf-dev-rg\""},"spName":{"value":"\"plan-sp-dev\""},"storesourcegroup":{"value":"az-terf-dev-rg"},"terraformstorageaccount":{"value":"azterfsdatadev0001"},"webAppName":{"value":"\"app-dev-webapp\""}},"variableGroups":[],"preDeployApprovals":{"approvals":[{"rank":1,"isAutomated":true,"isNotificationOn":false,"id":2}],"approvalOptions":{"requiredApproverCount":null,"releaseCreatorCanBeApprover":false,"autoTriggeredAndPreviousEnvironmentApprovedCanBeSkipped":false,"enforceIdentityRevalidation":false,"timeoutInMinutes":0,"executionOrder":1}},"deployStep":{"id":5},"postDeployApprovals":{"approvals":[{"rank":1,"isAutomated":true,"isNotificationOn":false,"id":8}],"approvalOptions":{"requiredApproverCount":null,"releaseCreatorCanBeApprover":false,"autoTriggeredAndPreviousEnvironmentApprovedCanBeSkipped":false,"enforceIdentityRevalidation":false,"timeoutInMinutes":0,"executionOrder":2}},"deployPhases":[{"deploymentInput":{"parallelExecution":{"parallelExecutionType":0},"agentSpecification":{"identifier":"vs2017-win2016"},"skipArtifactsDownload":false,"artifactsDownloadInput":{"downloadInputs":[]},"queueId":299,"demands":[],"enableAccessToken":false,"timeoutInMinutes":0,"jobCancelTimeoutInMinutes":1,"condition":"succeeded()","overrideInputs":{}},"rank":1,"phaseType":1,"name":"Dev","refName":null,"workflowTasks":[{"environment":{},"taskId":"46e4be58-730b-4389-8a2f-ea10b3e5e815","version":"2.*","name":"Create Resource Group and Storage Account","refName":"","enabled":true,"alwaysRun":false,"continueOnError":false,"timeoutInMinutes":0,"definitionType":"task","overrideInputs":{},"condition":"succeeded()","inputs":{"connectedServiceNameARM":"0b47641c-00a8-495f-8139-a08715f8e75d","scriptType":"bash","scriptLocation":"inlineScript","scriptPath":"","inlineScript":"#Creates Azure Resource Group\n\naz group create --location eastus --name $(ResouceGroupName)\n\n#Creates storage account\n\naz storage account create --name $(terraformstorageaccount) --resource-group $(ResouceGroupName) --location eastus --sku Standard_LRS\n\n#Creates container\n\naz storage container create --name terraform --account-name $(terraformstorageaccount)\n","scriptArguments":"","powerShellErrorActionPreference":"stop","addSpnToEnvironment":"false","useGlobalConfig":"false","cwd":"","failOnStandardError":"false","powerShellIgnoreLASTEXITCODE":"false"}},{"environment":{},"taskId":"46e4be58-730b-4389-8a2f-ea10b3e5e815","version":"2.*","name":"Obtain acess Key and assign to pipeline variable","refName":"","enabled":true,"alwaysRun":false,"continueOnError":false,"timeoutInMinutes":0,"definitionType":"task","overrideInputs":{},"condition":"succeeded()","inputs":{"connectedServiceNameARM":"0b47641c-00a8-495f-8139-a08715f8e75d","scriptType":"ps","scriptLocation":"inlineScript","scriptPath":"","inlineScript":"$key=az storage account keys list -g $(storesourcegroup) -n $(terraformstorageaccount) --query [0].value -o tsv\n\nWrite-Host \"##vso[task.setvariable variable=storagekey]$key\"","scriptArguments":"","powerShellErrorActionPreference":"stop","addSpnToEnvironment":"false","useGlobalConfig":"false","cwd":"","failOnStandardError":"false","powerShellIgnoreLASTEXITCODE":"false"}},{"environment":{},"taskId":"a8515ec8-7254-4ffd-912c-86772e2b5962","version":"3.*","name":"Replace tokens in **/*.tf **/*.tfvars","refName":"","enabled":true,"alwaysRun":false,"continueOnError":false,"timeoutInMinutes":0,"definitionType":"task","overrideInputs":{},"condition":"succeeded()","inputs":{"rootDirectory":"$(System.DefaultWorkingDirectory)/PartsUnlimitedE2E/Infra.Setup","targetFiles":"**/*.tf\n**/*.tfvars","encoding":"auto","writeBOM":"true","escapeType":"auto","escapeChar":"","charsToEscape":"","verbosity":"normal","actionOnMissing":"warn","keepToken":"false","tokenPrefix":"#{","tokenSuffix":"}#","useLegacyPattern":"false","emptyValue":"(empty)","variableFiles":"","variableSeparator":".","enableTelemetry":"true"}},{"environment":{},"taskId":"a4789e5d-f6e8-431f-add9-379d640a883c","version":"0.*","name":"Install Terraform 0.13.4","refName":"","enabled":true,"alwaysRun":false,"continueOnError":false,"timeoutInMinutes":0,"definitionType":"task","overrideInputs":{},"condition":"succeeded()","inputs":{"terraformVersion":"0.13.4"}},{"environment":{},"taskId":"fe504acc-6115-40cb-89ff-191386b5e7bf","version":"0.*","name":"Terraform : init","refName":"","enabled":true,"alwaysRun":false,"continueOnError":false,"timeoutInMinutes":0,"definitionType":"task","overrideInputs":{},"condition":"succeeded()","inputs":{"provider":"azurerm","command":"init","workingDirectory":"$(System.DefaultWorkingDirectory)/PartsUnlimitedE2E/Infra.Setup/","commandOptions":"","environmentServiceNameAzureRM":"","environmentServiceNameAWS":"","environmentServiceNameGCP":"","backendServiceArm":"0b47641c-00a8-495f-8139-a08715f8e75d","backendAzureRmResourceGroupName":"$(storesourcegroup)","backendAzureRmStorageAccountName":"$(TerraformStorageAccount)","backendAzureRmContainerName":"terraform","backendAzureRmKey":"terraform.tfstate","backendServiceAWS":"","backendAWSBucketName":"","backendAWSKey":"","backendServiceGCP":"","backendGCPBucketName":"","backendGCPPrefix":""}},{"environment":{},"taskId":"fe504acc-6115-40cb-89ff-191386b5e7bf","version":"0.*","name":"Terraform : plan","refName":"","enabled":true,"alwaysRun":false,"continueOnError":false,"timeoutInMinutes":0,"definitionType":"task","overrideInputs":{},"condition":"succeeded()","inputs":{"provider":"azurerm","command":"plan","workingDirectory":"$(System.DefaultWorkingDirectory)/PartsUnlimitedE2E/Infra.Setup/","commandOptions":"-var-file=$(System.DefaultWorkingDirectory)/PartsUnlimitedE2E/Infra.Setup/main.tfvars","environmentServiceNameAzureRM":"0b47641c-00a8-495f-8139-a08715f8e75d","environmentServiceNameAWS":"","environmentServiceNameGCP":"","backendServiceArm":"","backendAzureRmResourceGroupName":"","backendAzureRmStorageAccountName":"","backendAzureRmContainerName":"","backendAzureRmKey":"","backendServiceAWS":"","backendAWSBucketName":"","backendAWSKey":"","backendServiceGCP":"","backendGCPBucketName":"","backendGCPPrefix":""}},{"environment":{},"taskId":"fe504acc-6115-40cb-89ff-191386b5e7bf","version":"0.*","name":"Terraform : apply -auto-approve","refName":"terraformApply","enabled":true,"alwaysRun":false,"continueOnError":false,"timeoutInMinutes":0,"definitionType":"task","overrideInputs":{},"condition":"succeeded()","inputs":{"provider":"azurerm","command":"apply","workingDirectory":"$(System.DefaultWorkingDirectory)/PartsUnlimitedE2E/Infra.Setup/","commandOptions":"-var-file=$(System.DefaultWorkingDirectory)/PartsUnlimitedE2E/Infra.Setup/main.tfvars","environmentServiceNameAzureRM":"0b47641c-00a8-495f-8139-a08715f8e75d","environmentServiceNameAWS":"","environmentServiceNameGCP":"","backendServiceArm":"0b47641c-00a8-495f-8139-a08715f8e75d","backendAzureRmResourceGroupName":"$(storesourcegroup)","backendAzureRmStorageAccountName":"$(TerraformStorageAccount)","backendAzureRmContainerName":"terraform","backendAzureRmKey":"terraform.tfstate","backendServiceAWS":"","backendAWSBucketName":"","backendAWSKey":"","backendServiceGCP":"","backendGCPBucketName":"","backendGCPPrefix":""}},{"environment":{"jsonPath":"$(Terraform.jsonOutputVariablesPath)"},"taskId":"e213ff0f-5d5c-4791-802d-52ea3e7be1f1","version":"2.*","name":"Retrieve Terraform Outputs","refName":"terraformOutput","enabled":true,"alwaysRun":false,"continueOnError":false,"timeoutInMinutes":0,"definitionType":"task","overrideInputs":{},"condition":"succeeded()","inputs":{"targetType":"inline","filePath":"","arguments":"","script":"$terraformOutput = Get-Content \"$(terraformApply.jsonOutputVariablesPath)\" | ConvertFrom-Json\n$terraformOutput | Get-Member -MemberType NoteProperty | % { $o = $terraformOutput.($_.Name); \nWrite-Host \"##vso[task.setvariable variable=$($_.Name);isoutput=true;issecret=$($o.sensitive)]$($o.value)\" }","errorActionPreference":"stop","failOnStderr":"false","ignoreLASTEXITCODE":"false","pwsh":"false","workingDirectory":""}},{"environment":{},"taskId":"497d490f-eea7-4f2b-ab94-48d9c1acdcb1","version":"3.*","name":"Azure App Service Deploy","refName":"AzureRmWebAppDeployment2","enabled":true,"alwaysRun":false,"continueOnError":false,"timeoutInMinutes":0,"definitionType":"task","overrideInputs":{},"condition":"succeeded()","inputs":{"ConnectedServiceName":"0b47641c-00a8-495f-8139-a08715f8e75d","WebAppKind":"app","WebAppName":"$(terraformOutput.webAppName)","DeployToSlotFlag":"false","ResourceGroupName":"$(ResourceGroupName)","SlotName":"","ImageSource":"Registry","AzureContainerRegistry":"","AzureContainerRegistryLoginServer":"","AzureContainerRegistryImage":"","AzureContainerRegistryTag":"","DockerRepositoryAccess":"public","RegistryConnectedServiceName":"","PrivateRegistryImage":"","PrivateRegistryTag":"","DockerNamespace":"","DockerRepository":"","DockerImageTag":"","VirtualApplication":"","Package":"$(System.DefaultWorkingDirectory)/PartsUnlimitedE2E/drop/PartsUnlimitedWebsite.zip","BuiltinLinuxPackage":"$(System.DefaultWorkingDirectory)/**/*.zip","RuntimeStack":"","StartupCommand":"","WebAppUri":"","ScriptType":"","InlineScript":":: You can provide your deployment commands here. One command per line.","ScriptPath":"","GenerateWebConfig":"false","WebConfigParameters":"","AppSettings":"","ConfigurationSettings":"","TakeAppOfflineFlag":"false","UseWebDeploy":"false","SetParametersFile":"","RemoveAdditionalFilesFlag":"false","ExcludeFilesFromAppDataFlag":"false","AdditionalArguments":"","RenameFilesFlag":"false","XmlTransformation":"false","XmlVariableSubstitution":"false","JSONFiles":""}}]}],"environmentOptions":{"emailNotificationType":"OnlyOnFailure","emailRecipients":"release.environment.owner;release.creator","skipArtifactsDownload":false,"timeoutInMinutes":0,"enableAccessToken":false,"publishDeploymentStatus":false,"badgeEnabled":false,"autoLinkWorkItems":false,"pullRequestDeploymentEnabled":false},"demands":[],"conditions":[{"name":"ReleaseStarted","conditionType":1,"value":""}],"executionPolicy":{"concurrencyCount":0,"queueDepthCount":0},"schedules":[],"currentRelease":{"id":44,"url":"https://vsrm.dev.azure.com/vivekanandrapaka/3d5cc8e3-70f2-486d-81d5-abe33fde47c3/_apis/Release/releases/44","_links":{}},"retentionPolicy":{"daysToKeep":30,"releasesToKeep":3,"retainBuild":true},"processParameters":{},"properties":{"LinkBoardsWorkItems":{"$type":"System.String","$value":"False"}},"preDeploymentGates":{"id":0,"gatesOptions":null,"gates":[]},"postDeploymentGates":{"id":0,"gatesOptions":null,"gates":[]},"environmentTriggers":[],"badgeUrl":"https://vsrm.dev.azure.com/vivekanandrapaka/_apis/public/Release/badge/3d5cc8e3-70f2-486d-81d5-abe33fde47c3/1/1"},{"id":4,"name":"Prod","rank":3,"owner":{"displayName":"Rapaka, Vivekanand","url":"https://spsprodsin1.vssps.visualstudio.com/Ad5d055b6-6fee-47a0-96b1-e83ee14e3fc9/_apis/Identities/d1fb5890-4f0a-6627-b09a-08745c19f5f6","_links":{"avatar":{"href":"https://dev.azure.com/vivekanandrapaka/_apis/GraphProfile/MemberAvatars/aad.ZDFmYjU4OTAtNGYwYS03NjI3LWIwOWEtMDg3NDVjMTlmNWY2"}},"id":"d1fb5890-4f0a-6627-b09a-08745c19f5f6","uniqueName":"vivekanand.rapaka@capgemini.com","imageUrl":"https://dev.azure.com/vivekanandrapaka/_apis/GraphProfile/MemberAvatars/aad.ZDFmYjU4OTAtNGYwYS03NjI3LWIwOWEtMDg3NDVjMTlmNWY2","descriptor":"aad.ZDFmYjU4OTAtNGYwYS03NjI3LWIwOWEtMDg3NDVjMTlmNWY2"},"variables":{"appInsightsname":{"value":"\"appi-prd-appInsights\""},"ResouceGroupName":{"value":"\"az-terf-prd-rg\""},"spName":{"value":"\"plan-sp-prd\""},"terraformstorageaccount":{"value":"azterfsdataprd0001"},"webAppName":{"value":"\"app-prd-webapp\""}},"variableGroups":[],"preDeployApprovals":{"approvals":[{"rank":1,"isAutomated":true,"isNotificationOn":false,"id":10}],"approvalOptions":{"requiredApproverCount":null,"releaseCreatorCanBeApprover":false,"autoTriggeredAndPreviousEnvironmentApprovedCanBeSkipped":false,"enforceIdentityRevalidation":false,"timeoutInMinutes":0,"executionOrder":1}},"deployStep":{"id":11},"postDeployApprovals":{"approvals":[{"rank":1,"isAutomated":true,"isNotificationOn":false,"id":12}],"approvalOptions":{"requiredApproverCount":null,"releaseCreatorCanBeApprover":false,"autoTriggeredAndPreviousEnvironmentApprovedCanBeSkipped":false,"enforceIdentityRevalidation":false,"timeoutInMinutes":0,"executionOrder":2}},"deployPhases":[{"deploymentInput":{"parallelExecution":{"parallelExecutionType":0},"agentSpecification":{"identifier":"vs2017-win2016"},"skipArtifactsDownload":false,"artifactsDownloadInput":{"downloadInputs":[]},"queueId":299,"demands":[],"enableAccessToken":false,"timeoutInMinutes":0,"jobCancelTimeoutInMinutes":1,"condition":"succeeded()","overrideInputs":{}},"rank":1,"phaseType":1,"name":"Dev","refName":null,"workflowTasks":[{"environment":{},"taskId":"46e4be58-730b-4389-8a2f-ea10b3e5e815","version":"2.*","name":"Create Resource Group and Storage Account","refName":"","enabled":true,"alwaysRun":false,"continueOnError":false,"timeoutInMinutes":0,"definitionType":"task","overrideInputs":{},"condition":"succeeded()","inputs":{"connectedServiceNameARM":"0b47641c-00a8-495f-8139-a08715f8e75d","scriptType":"bash","scriptLocation":"inlineScript","scriptPath":"","inlineScript":"#Creates Azure Resource Group\n\naz group create --location eastus --name $(ResouceGroupName)\n\n#Creates storage account\n\naz storage account create --name $(terraformstorageaccount) --resource-group $(ResouceGroupName) --location eastus --sku Standard_LRS\n\n#Creates container\n\naz storage container create --name terraform --account-name $(terraformstorageaccount)\n","scriptArguments":"","powerShellErrorActionPreference":"stop","addSpnToEnvironment":"false","useGlobalConfig":"false","cwd":"","failOnStandardError":"false","powerShellIgnoreLASTEXITCODE":"false"}},{"environment":{},"taskId":"46e4be58-730b-4389-8a2f-ea10b3e5e815","version":"2.*","name":"Obtain acess Key and assign to pipeline variable","refName":"","enabled":true,"alwaysRun":false,"continueOnError":false,"timeoutInMinutes":0,"definitionType":"task","overrideInputs":{},"condition":"succeeded()","inputs":{"connectedServiceNameARM":"0b47641c-00a8-495f-8139-a08715f8e75d","scriptType":"ps","scriptLocation":"inlineScript","scriptPath":"","inlineScript":"$key=az storage account keys list -g $(storesourcegroup) -n $(terraformstorageaccount) --query [0].value -o tsv\n\nWrite-Host \"##vso[task.setvariable variable=storagekey]$key\"","scriptArguments":"","powerShellErrorActionPreference":"stop","addSpnToEnvironment":"false","useGlobalConfig":"false","cwd":"","failOnStandardError":"false","powerShellIgnoreLASTEXITCODE":"false"}},{"environment":{},"taskId":"a8515ec8-7254-4ffd-912c-86772e2b5962","version":"3.*","name":"Replace tokens in **/*.tf **/*.tfvars","refName":"","enabled":true,"alwaysRun":false,"continueOnError":false,"timeoutInMinutes":0,"definitionType":"task","overrideInputs":{},"condition":"succeeded()","inputs":{"rootDirectory":"$(System.DefaultWorkingDirectory)/PartsUnlimitedE2E/Infra.Setup","targetFiles":"**/*.tf\n**/*.tfvars","encoding":"auto","writeBOM":"true","escapeType":"auto","escapeChar":"","charsToEscape":"","verbosity":"normal","actionOnMissing":"warn","keepToken":"false","tokenPrefix":"#{","tokenSuffix":"}#","useLegacyPattern":"false","emptyValue":"(empty)","variableFiles":"","variableSeparator":".","enableTelemetry":"true"}},{"environment":{},"taskId":"a4789e5d-f6e8-431f-add9-379d640a883c","version":"0.*","name":"Install Terraform 0.13.4","refName":"","enabled":true,"alwaysRun":false,"continueOnError":false,"timeoutInMinutes":0,"definitionType":"task","overrideInputs":{},"condition":"succeeded()","inputs":{"terraformVersion":"0.13.4"}},{"environment":{},"taskId":"fe504acc-6115-40cb-89ff-191386b5e7bf","version":"0.*","name":"Terraform : init","refName":"","enabled":true,"alwaysRun":false,"continueOnError":false,"timeoutInMinutes":0,"definitionType":"task","overrideInputs":{},"condition":"succeeded()","inputs":{"provider":"azurerm","command":"init","workingDirectory":"$(System.DefaultWorkingDirectory)/PartsUnlimitedE2E/Infra.Setup/","commandOptions":"","environmentServiceNameAzureRM":"","environmentServiceNameAWS":"","environmentServiceNameGCP":"","backendServiceArm":"0b47641c-00a8-495f-8139-a08715f8e75d","backendAzureRmResourceGroupName":"$(storesourcegroup)","backendAzureRmStorageAccountName":"$(TerraformStorageAccount)","backendAzureRmContainerName":"terraform","backendAzureRmKey":"terraform.tfstate","backendServiceAWS":"","backendAWSBucketName":"","backendAWSKey":"","backendServiceGCP":"","backendGCPBucketName":"","backendGCPPrefix":""}},{"environment":{},"taskId":"fe504acc-6115-40cb-89ff-191386b5e7bf","version":"0.*","name":"Terraform : plan","refName":"","enabled":true,"alwaysRun":false,"continueOnError":false,"timeoutInMinutes":0,"definitionType":"task","overrideInputs":{},"condition":"succeeded()","inputs":{"provider":"azurerm","command":"plan","workingDirectory":"$(System.DefaultWorkingDirectory)/PartsUnlimitedE2E/Infra.Setup/","commandOptions":"-var-file=$(System.DefaultWorkingDirectory)/PartsUnlimitedE2E/Infra.Setup/main.tfvars","environmentServiceNameAzureRM":"0b47641c-00a8-495f-8139-a08715f8e75d","environmentServiceNameAWS":"","environmentServiceNameGCP":"","backendServiceArm":"","backendAzureRmResourceGroupName":"","backendAzureRmStorageAccountName":"","backendAzureRmContainerName":"","backendAzureRmKey":"","backendServiceAWS":"","backendAWSBucketName":"","backendAWSKey":"","backendServiceGCP":"","backendGCPBucketName":"","backendGCPPrefix":""}},{"environment":{},"taskId":"fe504acc-6115-40cb-89ff-191386b5e7bf","version":"0.*","name":"Terraform : apply -auto-approve","refName":"terraformApply","enabled":true,"alwaysRun":false,"continueOnError":false,"timeoutInMinutes":0,"definitionType":"task","overrideInputs":{},"condition":"succeeded()","inputs":{"provider":"azurerm","command":"apply","workingDirectory":"$(System.DefaultWorkingDirectory)/PartsUnlimitedE2E/Infra.Setup/","commandOptions":"-var-file=$(System.DefaultWorkingDirectory)/PartsUnlimitedE2E/Infra.Setup/main.tfvars","environmentServiceNameAzureRM":"0b47641c-00a8-495f-8139-a08715f8e75d","environmentServiceNameAWS":"","environmentServiceNameGCP":"","backendServiceArm":"0b47641c-00a8-495f-8139-a08715f8e75d","backendAzureRmResourceGroupName":"$(storesourcegroup)","backendAzureRmStorageAccountName":"$(TerraformStorageAccount)","backendAzureRmContainerName":"terraform","backendAzureRmKey":"terraform.tfstate","backendServiceAWS":"","backendAWSBucketName":"","backendAWSKey":"","backendServiceGCP":"","backendGCPBucketName":"","backendGCPPrefix":""}},{"environment":{"jsonPath":"$(Terraform.jsonOutputVariablesPath)"},"taskId":"e213ff0f-5d5c-4791-802d-52ea3e7be1f1","version":"2.*","name":"Retrieve Terraform Outputs","refName":"terraformOutput","enabled":true,"alwaysRun":false,"continueOnError":false,"timeoutInMinutes":0,"definitionType":"task","overrideInputs":{},"condition":"succeeded()","inputs":{"targetType":"inline","filePath":"","arguments":"","script":"$terraformOutput = Get-Content \"$(terraformApply.jsonOutputVariablesPath)\" | ConvertFrom-Json\n$terraformOutput | Get-Member -MemberType NoteProperty | % { $o = $terraformOutput.($_.Name); \nWrite-Host \"##vso[task.setvariable variable=$($_.Name);isoutput=true;issecret=$($o.sensitive)]$($o.value)\" }","errorActionPreference":"stop","failOnStderr":"false","ignoreLASTEXITCODE":"false","pwsh":"false","workingDirectory":""}},{"environment":{},"taskId":"497d490f-eea7-4f2b-ab94-48d9c1acdcb1","version":"3.*","name":"Azure App Service Deploy","refName":"AzureRmWebAppDeployment2","enabled":true,"alwaysRun":false,"continueOnError":false,"timeoutInMinutes":0,"definitionType":"task","overrideInputs":{},"condition":"succeeded()","inputs":{"ConnectedServiceName":"0b47641c-00a8-495f-8139-a08715f8e75d","WebAppKind":"app","WebAppName":"$(terraformOutput.webAppName)","DeployToSlotFlag":"false","ResourceGroupName":"$(ResourceGroupName)","SlotName":"","ImageSource":"Registry","AzureContainerRegistry":"","AzureContainerRegistryLoginServer":"","AzureContainerRegistryImage":"","AzureContainerRegistryTag":"","DockerRepositoryAccess":"public","RegistryConnectedServiceName":"","PrivateRegistryImage":"","PrivateRegistryTag":"","DockerNamespace":"","DockerRepository":"","DockerImageTag":"","VirtualApplication":"","Package":"$(System.DefaultWorkingDirectory)/PartsUnlimitedE2E/drop/PartsUnlimitedWebsite.zip","BuiltinLinuxPackage":"$(System.DefaultWorkingDirectory)/**/*.zip","RuntimeStack":"","StartupCommand":"","WebAppUri":"","ScriptType":"","InlineScript":":: You can provide your deployment commands here. One command per line.","ScriptPath":"","GenerateWebConfig":"false","WebConfigParameters":"","AppSettings":"","ConfigurationSettings":"","TakeAppOfflineFlag":"false","UseWebDeploy":"false","SetParametersFile":"","RemoveAdditionalFilesFlag":"false","ExcludeFilesFromAppDataFlag":"false","AdditionalArguments":"","RenameFilesFlag":"false","XmlTransformation":"false","XmlVariableSubstitution":"false","JSONFiles":""}}]}],"environmentOptions":{"emailNotificationType":"OnlyOnFailure","emailRecipients":"release.environment.owner;release.creator","skipArtifactsDownload":false,"timeoutInMinutes":0,"enableAccessToken":false,"publishDeploymentStatus":false,"badgeEnabled":false,"autoLinkWorkItems":false,"pullRequestDeploymentEnabled":false},"demands":[],"conditions":[{"name":"Dev","conditionType":2,"value":"4"},{"name":"PreProd","conditionType":2,"value":"4"}],"executionPolicy":{"concurrencyCount":0,"queueDepthCount":0},"schedules":[],"currentRelease":{"id":45,"url":"https://vsrm.dev.azure.com/vivekanandrapaka/3d5cc8e3-70f2-486d-81d5-abe33fde47c3/_apis/Release/releases/45","_links":{}},"retentionPolicy":{"daysToKeep":30,"releasesToKeep":3,"retainBuild":true},"processParameters":{},"properties":{"LinkBoardsWorkItems":{"$type":"System.String","$value":"False"},"BoardsEnvironmentType":{"$type":"System.String","$value":"unmapped"}},"preDeploymentGates":{"id":0,"gatesOptions":null,"gates":[]},"postDeploymentGates":{"id":0,"gatesOptions":null,"gates":[]},"environmentTriggers":[],"badgeUrl":"https://vsrm.dev.azure.com/vivekanandrapaka/_apis/public/Release/badge/3d5cc8e3-70f2-486d-81d5-abe33fde47c3/1/4"},{"id":5,"name":"PreProd","rank":2,"owner":{"displayName":"Rapaka, Vivekanand","url":"https://spsprodsin1.vssps.visualstudio.com/Ad5d055b6-6fee-47a0-96b1-e83ee14e3fc9/_apis/Identities/d1fb5890-4f0a-6627-b09a-08745c19f5f6","_links":{"avatar":{"href":"https://dev.azure.com/vivekanandrapaka/_apis/GraphProfile/MemberAvatars/aad.ZDFmYjU4OTAtNGYwYS03NjI3LWIwOWEtMDg3NDVjMTlmNWY2"}},"id":"d1fb5890-4f0a-6627-b09a-08745c19f5f6","uniqueName":"vivekanand.rapaka@capgemini.com","imageUrl":"https://dev.azure.com/vivekanandrapaka/_apis/GraphProfile/MemberAvatars/aad.ZDFmYjU4OTAtNGYwYS03NjI3LWIwOWEtMDg3NDVjMTlmNWY2","descriptor":"aad.ZDFmYjU4OTAtNGYwYS03NjI3LWIwOWEtMDg3NDVjMTlmNWY2"},"variables":{"appInsightsname":{"value":"\"appi-ppd-appInsights\""},"ResouceGroupName":{"value":"\"az-terf-ppd-rg\""},"spName":{"value":"\"plan-sp-ppd\""},"storesourcegroup":{"value":"az-terf-ppd-rg"},"terraformstorageaccount":{"value":"azterfsdatappd0001"},"webAppName":{"value":"\"app-ppd-webapp\""}},"variableGroups":[],"preDeployApprovals":{"approvals":[{"rank":1,"isAutomated":true,"isNotificationOn":false,"id":13}],"approvalOptions":{"requiredApproverCount":null,"releaseCreatorCanBeApprover":false,"autoTriggeredAndPreviousEnvironmentApprovedCanBeSkipped":false,"enforceIdentityRevalidation":false,"timeoutInMinutes":0,"executionOrder":1}},"deployStep":{"id":14},"postDeployApprovals":{"approvals":[{"rank":1,"isAutomated":true,"isNotificationOn":false,"id":15}],"approvalOptions":{"requiredApproverCount":null,"releaseCreatorCanBeApprover":false,"autoTriggeredAndPreviousEnvironmentApprovedCanBeSkipped":false,"enforceIdentityRevalidation":false,"timeoutInMinutes":0,"executionOrder":2}},"deployPhases":[{"deploymentInput":{"parallelExecution":{"parallelExecutionType":0},"agentSpecification":{"identifier":"vs2017-win2016"},"skipArtifactsDownload":false,"artifactsDownloadInput":{"downloadInputs":[]},"queueId":299,"demands":[],"enableAccessToken":false,"timeoutInMinutes":0,"jobCancelTimeoutInMinutes":1,"condition":"succeeded()","overrideInputs":{}},"rank":1,"phaseType":1,"name":"Dev","refName":null,"workflowTasks":[{"environment":{},"taskId":"46e4be58-730b-4389-8a2f-ea10b3e5e815","version":"2.*","name":"Create Resource Group and Storage Account","refName":"","enabled":true,"alwaysRun":false,"continueOnError":false,"timeoutInMinutes":0,"definitionType":"task","overrideInputs":{},"condition":"succeeded()","inputs":{"connectedServiceNameARM":"0b47641c-00a8-495f-8139-a08715f8e75d","scriptType":"bash","scriptLocation":"inlineScript","scriptPath":"","inlineScript":"#Creates Azure Resource Group\n\naz group create --location eastus --name $(ResouceGroupName)\n\n#Creates storage account\n\naz storage account create --name $(terraformstorageaccount) --resource-group $(ResouceGroupName) --location eastus --sku Standard_LRS\n\n#Creates container\n\naz storage container create --name terraform --account-name $(terraformstorageaccount)\n","scriptArguments":"","powerShellErrorActionPreference":"stop","addSpnToEnvironment":"false","useGlobalConfig":"false","cwd":"","failOnStandardError":"false","powerShellIgnoreLASTEXITCODE":"false"}},{"environment":{},"taskId":"46e4be58-730b-4389-8a2f-ea10b3e5e815","version":"2.*","name":"Obtain acess Key and assign to pipeline variable","refName":"","enabled":true,"alwaysRun":false,"continueOnError":false,"timeoutInMinutes":0,"definitionType":"task","overrideInputs":{},"condition":"succeeded()","inputs":{"connectedServiceNameARM":"0b47641c-00a8-495f-8139-a08715f8e75d","scriptType":"ps","scriptLocation":"inlineScript","scriptPath":"","inlineScript":"$key=az storage account keys list -g $(storesourcegroup) -n $(terraformstorageaccount) --query [0].value -o tsv\n\nWrite-Host \"##vso[task.setvariable variable=storagekey]$key\"","scriptArguments":"","powerShellErrorActionPreference":"stop","addSpnToEnvironment":"false","useGlobalConfig":"false","cwd":"","failOnStandardError":"false","powerShellIgnoreLASTEXITCODE":"false"}},{"environment":{},"taskId":"a8515ec8-7254-4ffd-912c-86772e2b5962","version":"3.*","name":"Replace tokens in **/*.tf **/*.tfvars","refName":"","enabled":true,"alwaysRun":false,"continueOnError":false,"timeoutInMinutes":0,"definitionType":"task","overrideInputs":{},"condition":"succeeded()","inputs":{"rootDirectory":"$(System.DefaultWorkingDirectory)/PartsUnlimitedE2E/Infra.Setup","targetFiles":"**/*.tf\n**/*.tfvars","encoding":"auto","writeBOM":"true","escapeType":"auto","escapeChar":"","charsToEscape":"","verbosity":"normal","actionOnMissing":"warn","keepToken":"false","tokenPrefix":"#{","tokenSuffix":"}#","useLegacyPattern":"false","emptyValue":"(empty)","variableFiles":"","variableSeparator":".","enableTelemetry":"true"}},{"environment":{},"taskId":"a4789e5d-f6e8-431f-add9-379d640a883c","version":"0.*","name":"Install Terraform 0.13.4","refName":"","enabled":true,"alwaysRun":false,"continueOnError":false,"timeoutInMinutes":0,"definitionType":"task","overrideInputs":{},"condition":"succeeded()","inputs":{"terraformVersion":"0.13.4"}},{"environment":{},"taskId":"fe504acc-6115-40cb-89ff-191386b5e7bf","version":"0.*","name":"Terraform : init","refName":"","enabled":true,"alwaysRun":false,"continueOnError":false,"timeoutInMinutes":0,"definitionType":"task","overrideInputs":{},"condition":"succeeded()","inputs":{"provider":"azurerm","command":"init","workingDirectory":"$(System.DefaultWorkingDirectory)/PartsUnlimitedE2E/Infra.Setup/","commandOptions":"","environmentServiceNameAzureRM":"","environmentServiceNameAWS":"","environmentServiceNameGCP":"","backendServiceArm":"0b47641c-00a8-495f-8139-a08715f8e75d","backendAzureRmResourceGroupName":"$(storesourcegroup)","backendAzureRmStorageAccountName":"$(TerraformStorageAccount)","backendAzureRmContainerName":"terraform","backendAzureRmKey":"terraform.tfstate","backendServiceAWS":"","backendAWSBucketName":"","backendAWSKey":"","backendServiceGCP":"","backendGCPBucketName":"","backendGCPPrefix":""}},{"environment":{},"taskId":"fe504acc-6115-40cb-89ff-191386b5e7bf","version":"0.*","name":"Terraform : plan","refName":"","enabled":true,"alwaysRun":false,"continueOnError":false,"timeoutInMinutes":0,"definitionType":"task","overrideInputs":{},"condition":"succeeded()","inputs":{"provider":"azurerm","command":"plan","workingDirectory":"$(System.DefaultWorkingDirectory)/PartsUnlimitedE2E/Infra.Setup/","commandOptions":"-var-file=$(System.DefaultWorkingDirectory)/PartsUnlimitedE2E/Infra.Setup/main.tfvars","environmentServiceNameAzureRM":"0b47641c-00a8-495f-8139-a08715f8e75d","environmentServiceNameAWS":"","environmentServiceNameGCP":"","backendServiceArm":"","backendAzureRmResourceGroupName":"","backendAzureRmStorageAccountName":"","backendAzureRmContainerName":"","backendAzureRmKey":"","backendServiceAWS":"","backendAWSBucketName":"","backendAWSKey":"","backendServiceGCP":"","backendGCPBucketName":"","backendGCPPrefix":""}},{"environment":{},"taskId":"fe504acc-6115-40cb-89ff-191386b5e7bf","version":"0.*","name":"Terraform : apply -auto-approve","refName":"terraformApply","enabled":true,"alwaysRun":false,"continueOnError":false,"timeoutInMinutes":0,"definitionType":"task","overrideInputs":{},"condition":"succeeded()","inputs":{"provider":"azurerm","command":"apply","workingDirectory":"$(System.DefaultWorkingDirectory)/PartsUnlimitedE2E/Infra.Setup/","commandOptions":"-var-file=$(System.DefaultWorkingDirectory)/PartsUnlimitedE2E/Infra.Setup/main.tfvars","environmentServiceNameAzureRM":"0b47641c-00a8-495f-8139-a08715f8e75d","environmentServiceNameAWS":"","environmentServiceNameGCP":"","backendServiceArm":"0b47641c-00a8-495f-8139-a08715f8e75d","backendAzureRmResourceGroupName":"$(storesourcegroup)","backendAzureRmStorageAccountName":"$(TerraformStorageAccount)","backendAzureRmContainerName":"terraform","backendAzureRmKey":"terraform.tfstate","backendServiceAWS":"","backendAWSBucketName":"","backendAWSKey":"","backendServiceGCP":"","backendGCPBucketName":"","backendGCPPrefix":""}},{"environment":{"jsonPath":"$(Terraform.jsonOutputVariablesPath)"},"taskId":"e213ff0f-5d5c-4791-802d-52ea3e7be1f1","version":"2.*","name":"Retrieve Terraform Outputs","refName":"terraformOutput","enabled":true,"alwaysRun":false,"continueOnError":false,"timeoutInMinutes":0,"definitionType":"task","overrideInputs":{},"condition":"succeeded()","inputs":{"targetType":"inline","filePath":"","arguments":"","script":"$terraformOutput = Get-Content \"$(terraformApply.jsonOutputVariablesPath)\" | ConvertFrom-Json\n$terraformOutput | Get-Member -MemberType NoteProperty | % { $o = $terraformOutput.($_.Name); \nWrite-Host \"##vso[task.setvariable variable=$($_.Name);isoutput=true;issecret=$($o.sensitive)]$($o.value)\" }","errorActionPreference":"stop","failOnStderr":"false","ignoreLASTEXITCODE":"false","pwsh":"false","workingDirectory":""}},{"environment":{},"taskId":"497d490f-eea7-4f2b-ab94-48d9c1acdcb1","version":"3.*","name":"Azure App Service Deploy","refName":"AzureRmWebAppDeployment2","enabled":true,"alwaysRun":false,"continueOnError":false,"timeoutInMinutes":0,"definitionType":"task","overrideInputs":{},"condition":"succeeded()","inputs":{"ConnectedServiceName":"0b47641c-00a8-495f-8139-a08715f8e75d","WebAppKind":"app","WebAppName":"$(terraformOutput.webAppName)","DeployToSlotFlag":"false","ResourceGroupName":"$(ResourceGroupName)","SlotName":"","ImageSource":"Registry","AzureContainerRegistry":"","AzureContainerRegistryLoginServer":"","AzureContainerRegistryImage":"","AzureContainerRegistryTag":"","DockerRepositoryAccess":"public","RegistryConnectedServiceName":"","PrivateRegistryImage":"","PrivateRegistryTag":"","DockerNamespace":"","DockerRepository":"","DockerImageTag":"","VirtualApplication":"","Package":"$(System.DefaultWorkingDirectory)/PartsUnlimitedE2E/drop/PartsUnlimitedWebsite.zip","BuiltinLinuxPackage":"$(System.DefaultWorkingDirectory)/**/*.zip","RuntimeStack":"","StartupCommand":"","WebAppUri":"","ScriptType":"","InlineScript":":: You can provide your deployment commands here. One command per line.","ScriptPath":"","GenerateWebConfig":"false","WebConfigParameters":"","AppSettings":"","ConfigurationSettings":"","TakeAppOfflineFlag":"false","UseWebDeploy":"false","SetParametersFile":"","RemoveAdditionalFilesFlag":"false","ExcludeFilesFromAppDataFlag":"false","AdditionalArguments":"","RenameFilesFlag":"false","XmlTransformation":"false","XmlVariableSubstitution":"false","JSONFiles":""}}]}],"environmentOptions":{"emailNotificationType":"OnlyOnFailure","emailRecipients":"release.environment.owner;release.creator","skipArtifactsDownload":false,"timeoutInMinutes":0,"enableAccessToken":false,"publishDeploymentStatus":false,"badgeEnabled":false,"autoLinkWorkItems":false,"pullRequestDeploymentEnabled":false},"demands":[],"conditions":[{"name":"Dev","conditionType":2,"value":"4"}],"executionPolicy":{"concurrencyCount":0,"queueDepthCount":0},"schedules":[],"currentRelease":{"id":0,"url":"https://vsrm.dev.azure.com/vivekanandrapaka/3d5cc8e3-70f2-486d-81d5-abe33fde47c3/_apis/Release/releases/0","_links":{}},"retentionPolicy":{"daysToKeep":30,"releasesToKeep":3,"retainBuild":true},"processParameters":{},"properties":{"LinkBoardsWorkItems":{"$type":"System.String","$value":"False"},"BoardsEnvironmentType":{"$type":"System.String","$value":"unmapped"}},"preDeploymentGates":{"id":0,"gatesOptions":null,"gates":[]},"postDeploymentGates":{"id":0,"gatesOptions":null,"gates":[]},"environmentTriggers":[],"badgeUrl":"https://vsrm.dev.azure.com/vivekanandrapaka/_apis/public/Release/badge/3d5cc8e3-70f2-486d-81d5-abe33fde47c3/1/5"}],"artifacts":[{"sourceId":"3d5cc8e3-70f2-486d-81d5-abe33fde47c3:35","type":"Build","alias":"PartsUnlimitedE2E","definitionReference":{"artifactSourceDefinitionUrl":{"id":"https://dev.azure.com/vivekanandrapaka/_permalink/_build/index?collectionId=f506f961-27a3-42c5-9239-005ad67fd5de&projectId=3d5cc8e3-70f2-486d-81d5-abe33fde47c3&definitionId=35","name":""},"defaultVersionBranch":{"id":"","name":""},"defaultVersionSpecific":{"id":"","name":""},"defaultVersionTags":{"id":"","name":""},"defaultVersionType":{"id":"latestType","name":"Latest"},"definition":{"id":"35","name":"PartsUnlimitedE2E"},"project":{"id":"3d5cc8e3-70f2-486d-81d5-abe33fde47c3","name":"PartsUnlimited"}},"isPrimary":true,"isRetained":false}],"triggers":[{"artifactAlias":"PartsUnlimitedE2E","triggerConditions":[],"triggerType":1}],"releaseNameFormat":"Release-$(rev:r)","tags":[],"properties":{"IntegrateBoardsWorkItems":{"$type":"System.String","$value":"False"},"IntegrateJiraWorkItems":{"$type":"System.String","$value":"false"}},"id":1,"name":"PartsUnlimitedE2E","path":"\\","projectReference":null,"url":"https://vsrm.dev.azure.com/vivekanandrapaka/3d5cc8e3-70f2-486d-81d5-abe33fde47c3/_apis/Release/definitions/1","_links":{"self":{"href":"https://vsrm.dev.azure.com/vivekanandrapaka/3d5cc8e3-70f2-486d-81d5-abe33fde47c3/_apis/Release/definitions/1"},"web":{"href":"https://dev.azure.com/vivekanandrapaka/3d5cc8e3-70f2-486d-81d5-abe33fde47c3/_release?definitionId=1"}}}